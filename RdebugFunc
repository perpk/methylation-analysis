library(dplyr)
library(minfi)
library(dplyr)

main <- function() {
    project_to_load <- "ppmi_20260103_120001"
    data_folder <- "ppmi"
    
    targets <- readRDS(file.path(data_folder, "targets.rds"))

    cohorts <- list(
        PD_vs_Control = c("PD", "Control"),
        SWEDD_vs_Control = c("SWEDD", "Control")
    )

    source("./meta_vars_mapping.R")
    var_mappings <- meta_vars_mapping(dataset = project_name)

    source("./pre_process_eda.R")
    pre_process_eda(
        project_to_load = project_to_load,
        targets = targets,
        data_folder = data_folder,
        project_location = "/Volumes/Elements/methyl-pipe-out",
        var_mapping = var_mappings,
        platform = "EPIC",
        qc_threshold = "auto",
        cohorts = cohorts
    )
}